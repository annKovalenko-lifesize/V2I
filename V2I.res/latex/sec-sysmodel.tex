\section{Problem Statement and System Model}\label{sec:sysmodel}
\subsection{Problem Statement}
In V2I communication an ideal scenario of service happens as follows. While driving through the roads, vehicles request services from the Base Stations. As the request is generated, it travels from the vehicle to the Base Station. The result is sent back to the requesting vehicle when the processing is completed. The majority of requests are delay-sensitive which means that request response needs to reach the vehicle within a certain time frame. This time frame is defined in our research as an individual deadline for each specific task.

Therefore the problem can be defined as, \textit{how to allocate arriving tasks to a base station in a V2I network so that the number of tasks missing their deadline is minimized?}
\subsection{System Model}
\subsubsection{\textbf{Formulation}}
In our scenario a set of tasks is generated by vehicles and sent to the \bs for processing. Every task has its own deadline within which it has to be completed. Our system allocates the tasks to \bs s considering individual deadlines. Allocation algorithm aims to maximize the number of tasks meeting their deadline. According to the problem definition, the set of arriving tasks can be defined as ``T", where  T = $\{t_1, t_2, t_3, t_4\dots,t_n\}$ and the set of Base Stations ``BS", where BS = $\{bs_1, bs_2, bs_3, bs_4\dots,bs_m\}$. The set of tasks that meet their deadline can be denoted as $T_s$, which is the subset of T ($T_s \subseteq$ T). It is assumed that a task $t_i$ is allocated to the base station $bs_j$ when the task $t_i$ can meet its deadline $\delta_i$ in that specific base station $bs_j$. The problem can be formulated as:
\begin{equation*}
\begin{aligned}
&  \underset{tbs}{\text{maximize}}
& & \sum_{i=1,j=1}^{n,m} t_ibs_j , where~t_i \in \T_i \& bs_j \in BS\\
& \text{subject to}
& &  t_i \leq \delta_i\;
\end{aligned}
\end{equation*}

\subsubsection{\textbf{Assumptions}}
We assume that V2I services are provided to the moving vehicles on the road by means of the Base Stations. In our system model \bs s are stationary edge devices with memory storage, computational capacity, and short wireless range transmission system \cite{liu2010rsu}. It is also assumed that a receiving \bs is connected to the one-hop distance \bs s. Therefore, a receiving \bs can transfer tasks to the neighboring \bs s if needed. Vehicles in the vicinity of the Base Station (within its transmission range) generate service requests. Assuming the variety of services is offered by a vehicular network. We categorize arriving tasks by a task type. Task types represent different requests a vehicle can submit (e.g., Hazards Around the Area, Nearby Gas Stations, Weather Forecast). According to the task type, delay-tolerant tasks are bigger in data size (need more time to execute). Respectively, delay-sensitive tasks are smaller. Due to heterogeneity across the \bs s, the tasks of different type have different expected completion times in different \bs s.

Upon arrival of the task to a \bs, it is assigned an individual deadline. Individual deadline includes task arrival time and the end-to- end delay the task can tolerate. We assume in our case that communication delay (uplink and downlink delay) can be significant. Thus, we also consider a communication delay for a deadline calculation. For arriving task $t_i$, deadline $\delta_i$ can be defined as:
\begin{equation} 
$\delta_\textrm{i}$ = $arr_\textrm{i} + E_\textrm{i} + \epsilon$ + $\beta$ 
\end{equation} 
$arr_\textrm{i}$ is the arrival time of the task, $E_\textrm{i}$ is the average task completion time, $\epsilon$ is a constant value defined by the \bs (slack time) and $\beta$ is the communication delay. In our system model, we assume that tasks arrive at the \bs randomly and arrival rate is not known in advance. Receiving Base Station is considered oversubscribed, which means that it receives the number of tasks beyond its capacity to execute within a deadline. Therefore, some tasks are projected to miss their deadline. If such tasks are delay-sensitive, then they are dropped. Dropping tasks is a usual practice in oversubscribed real-time systems \cite{khemka2014utility,KHEMKA201514,khemka2015utility}. In such systems, the execution of a task that is going to miss its deadline has no value. For instance, a vehicle requests an update about the road conditions of a specific street. If there is no response by the time the vehicle has reached the street, there is no more value to the requested update. In this research, we define the task robustness as the probability of task to meet its deadline in a particular \bs. For example, if an arriving task has a greater probability to meet its deadline in the Base Station ``A" among a cluster of \bs s, then \bs ``A‚Äù provides a greater robustness for this task. As we aim to provide a robust system from the user perspective, it is assumed that a cloud server is connected to a cluster of \bs s for a failover or computation-intensive tasks which can not be processed in any of the \bs s.

\subsubsection{\textbf{Delay Estimation}}
In a V2I systems, three distinct factors contribute to the definition of the end-to-end delay ($D_\textrm{V2I}$). They are $d_U$, $d_\textrm{BS}$  and $d_D$ \cite{mostafa2011}. Therefore, V2I end-to-end delay ($D_\textrm{V2I}$) can be defined as: 
\begin{equation}
D_\textrm{V2I} = d_\textrm{U} + d_\textrm{BS} + d_\textrm{D} \label{eq:1}
\end{equation} 
where $d_U$  = average uplink delay, $d_\textrm{BS}$  = average delay in the \bs~and $d_D$  = average downlink delay. From the equation 1, $d_U$  and $d_D$ can be defined as follows. For a task $t_i$  requested by the vehicle ``i" to the \bs~``m", the uplink delay from ``i" to ``m" is \begin{equation} d_\textrm{U} =  \frac{L_\textrm{i}}{g(i,m)} \label{eq:2} \end{equation} and for $t_i$ traveling back from ``m" to ``i", the downlink delay is \begin{equation} d_\textrm{D} =  \frac{L_\textrm{i}}{g(m,i)} \label{eq:3} \end{equation} where $L_i$  is the task data size, g(i,m) and g(m,i) is the effective transmission data rate for the link from ``i" to ``m" (uplink bandwidth) and from ``m" to ``i" (downlink bandwidth) respectively.

\subsubsection{System Model Scenario}
Upon the arrival to the \bs~the task gets into the load balancer. The load balancer works in an immediate mode to allocate arriving tasks to the \bs s. It can allocate the task to the receiving \bs~or to the one-hop distance neighboring \bs. Therefore, an arriving task gets immediately allocated by the load balancer. When the task is allocated, it enters the batch queue of the \bs~for processing. From the arrival to the end of the task processing a delay is imposed. Such delay can be defined as a ``computational delay" ($d_c$). Therefore $d_\textrm{BS}$ can be defined as :  $d_\textrm{BS}$ = $d_c$, where $d_c$ = average computational delay.

\begin{figure}[h!]
\centering	
\includegraphics[scale=0.38]{Figures/systemModel_BS}
\caption{Base Station architecture.}
\end{figure}

  